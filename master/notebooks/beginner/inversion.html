

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Ice thickness inversion &#8212; OGGM tutorials</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-106829797-2"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-106829797-2');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/beginner/inversion';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Hydrological mass-balance output" href="hydrological_output.html" />
    <link rel="prev" title="Dealing with errors after a run" href="deal_with_errors.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../welcome.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../welcome.html">
                    Welcome to the OGGM tutorials!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">10 minutes tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../10minutes/preprocessed_directories.html">10 minutes to… a preprocessed directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10minutes/run_with_gcm.html">10 minutes to… a glacier change projection with GCM data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10minutes/machine_learning.html">10 minutes to… OGGM as an accelerator for modelling and machine learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10minutes/elevation_bands_vs_centerlines.html">10 minutes to… “elevation band” and “centerline” flowlines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10minutes/dynamical_spinup.html">10 minutes to… understand the new dynamical spinup in OGGM v1.6</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Beginner tutorials</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="working_with_rgi.html">Working with the RGI files</a></li>
<li class="toctree-l1"><a class="reference internal" href="store_and_compress_glacierdirs.html">Storing glacier directories for later use</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_mass_balance.html">Plotting the OGGM surface mass-balance, the ELA and AAR</a></li>

<li class="toctree-l1"><a class="reference internal" href="distribute_flowline.html">Compute area and thickness changes on a grid (nice, but experimental!)</a></li>
<li class="toctree-l1"><a class="reference internal" href="deal_with_errors.html">Dealing with errors after a run</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Ice thickness inversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="hydrological_output.html">Hydrological mass-balance output</a></li>
<li class="toctree-l1"><a class="reference internal" href="oggm_shop.html">OGGM-Shop and Glacier Directories in OGGM</a></li>
<li class="toctree-l1"><a class="reference internal" href="full_prepro_workflow.html">What’s in my preprocessed directories with centerlines? A full OGGM workflow, step by step</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Advanced tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../advanced/preprocessing_errors.html">Error analysis of the global pre-processing workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/run_with_a_spinup_and_gcm_data.html">Run with a long spinup and GCM data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/dem_sources.html">Create local topography maps from different DEM sources with OGGM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/use_your_own_inventory.html">Using your our own glacier inventory with OGGM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/centerlines_to_shape.html">Compute smoother centerlines for shapefile output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/massbalance_calibration.html">A look into the new mass balance calibration in OGGM v1.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/numeric_solvers.html">Understand the difference between the ice dynamic solvers in OGGM</a></li>

<li class="toctree-l1"><a class="reference internal" href="../advanced/where_are_the_flowlines.html">OGGM flowlines: where are they?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/ingest_gridded_data_on_flowlines.html">Ingest gridded products such as ice velocity into OGGM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/merge_gcm_runs_and_visualize.html">Merge, analyse and visualize OGGM GCM runs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/dynamical_spinup.html">Dynamic spinup and dynamic <em>melt_f</em> calibration for past simulations</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">RGI-TOPO</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../others/rgitopo_rgi6.html">Compare different DEMs for individual glaciers: RGI-TOPO for RGI v6.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../others/rgitopo_rgi7.html">RGI-TOPO for RGI 7.0</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Related to OGGM</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../others/holoviz_intro.html">Small overview of HoloViz capability of data exploration</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">In (re-)construction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../construction/inversion_with_frontal_ablation.html">Ice thickness inversion with frontal ablation: a case study</a></li>
<li class="toctree-l1"><a class="reference internal" href="../construction/kcalving_parameterization.html">The Oerlemans &amp; Nick frontal ablation parameterization in OGGM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../construction/merging_glaciers.html">Merging glaciers for past climate simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../construction/area_length_filter.html">Filter the glacier length and area time series</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/OGGM/tutorials/master?urlpath=lab/tree/./notebooks/beginner/inversion.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://hub.oggm.org/hub/user-redirect/git-pull?repo=https%3A//github.com/OGGM/tutorials&urlpath=lab/tree/tutorials/./notebooks/beginner/inversion.ipynb&branch=master" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onJupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/OGGM/tutorials" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/OGGM/tutorials/edit/master/./notebooks/beginner/inversion.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/OGGM/tutorials/issues/new?title=Issue%20on%20page%20%2Fnotebooks/beginner/inversion.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/notebooks/beginner/inversion.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Ice thickness inversion</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run">Run</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#read-the-data">Read the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#results">Results</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sensitivity-analysis">Sensitivity analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#since-oggm-version-1-4-calibrate-to-match-the-consensus-estimate">Since OGGM version 1.4: calibrate to match the consensus estimate</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#distributed-ice-thickness">Distributed ice thickness</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-many-glaciers-on-a-map">Plot many glaciers on a map</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-oggm">Using OGGM</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-salem">Using salem</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-s-next">What’s next?</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="ice-thickness-inversion">
<h1>Ice thickness inversion<a class="headerlink" href="#ice-thickness-inversion" title="Permalink to this heading">#</a></h1>
<p>This example shows how to run the OGGM ice thickness inversion model
with various ice parameters: the deformation parameter A and a sliding
parameter (fs).</p>
<p>There is currently no “best” set of parameters for the ice thickness
inversion model. As shown in
<a class="reference external" href="https://www.geosci-model-dev.net/12/909/2019/">Maussion et al. (2019)</a>,
the default parameter set results in global volume estimates which are a bit
larger than previous values. For the consensus estimate of
<a class="reference external" href="https://www.nature.com/articles/s41561-019-0300-3">Farinotti et al. (2019)</a>,
OGGM participated with a deformation parameter A that is 1.5 times larger than the
generally accepted default value.</p>
<p>There is no reason to think that the ice parameters are the same between
neighboring glaciers. There is currently no “good” way to calibrate them,
or at least no generaly accepted one.
We won’t discuss the details here, but we provide a script to illustrate
the sensitivity of the model to this choice.</p>
<p><strong>New in version 1.4</strong>: we demonstrate how to apply a new global task in OGGM, <code class="docutils literal notranslate"><span class="pre">workflow.calibrate_inversion_from_consensus</span></code> to calibrate the A parameter to match the consensus estimate from <a class="reference external" href="https://www.nature.com/articles/s41561-019-0300-3">Farinotti et al. (2019)</a>.</p>
<p>At the end of this tutorial, we show how to distribute the “flowline thicknesses” on a glacier map.</p>
<section id="run">
<h2>Run<a class="headerlink" href="#run" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Libs</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

<span class="c1"># Locals</span>
<span class="kn">import</span> <span class="nn">oggm.cfg</span> <span class="k">as</span> <span class="nn">cfg</span>
<span class="kn">from</span> <span class="nn">oggm</span> <span class="kn">import</span> <span class="n">utils</span><span class="p">,</span> <span class="n">workflow</span><span class="p">,</span> <span class="n">tasks</span><span class="p">,</span> <span class="n">graphics</span>

<span class="c1"># Initialize OGGM and set up the default run parameters</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">logging_level</span><span class="o">=</span><span class="s1">&#39;WARNING&#39;</span><span class="p">)</span>
<span class="n">rgi_region</span> <span class="o">=</span> <span class="s1">&#39;11&#39;</span>  <span class="c1"># Region Central Europe</span>

<span class="c1"># Local working directory (where OGGM will write its output)</span>
<span class="n">WORKING_DIR</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">(</span><span class="s1">&#39;OGGM_Inversion&#39;</span><span class="p">)</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">PATHS</span><span class="p">[</span><span class="s1">&#39;working_dir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">WORKING_DIR</span>

<span class="c1"># This is useful here</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">PARAMS</span><span class="p">[</span><span class="s1">&#39;use_multiprocessing&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># RGI file</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_rgi_region_file</span><span class="p">(</span><span class="n">rgi_region</span><span class="p">)</span>
<span class="n">rgidf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

<span class="c1"># Select the glaciers in the Pyrenees</span>
<span class="n">rgidf</span> <span class="o">=</span> <span class="n">rgidf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">rgidf</span><span class="p">[</span><span class="s1">&#39;O2Region&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span><span class="p">]</span>

<span class="c1"># Sort for more efficient parallel computing</span>
<span class="n">rgidf</span> <span class="o">=</span> <span class="n">rgidf</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Area&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Go - get the pre-processed glacier directories</span>
<span class="c1"># We start at level 3, because we need all data for the inversion</span>
<span class="c1"># we need centerlines to use all functions of the distributed ice thickness later </span>
<span class="c1"># (we specifically need `geometries.pkl` in the gdirs)</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">PARAMS</span><span class="p">[</span><span class="s1">&#39;border&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">80</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;https://cluster.klima.uni-bremen.de/~oggm/gdirs/oggm_v1.6/&#39;</span>
            <span class="s1">&#39;L3-L5_files/2023.1/centerlines/W5E5/&#39;</span><span class="p">)</span>
<span class="n">gdirs</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">init_glacier_directories</span><span class="p">(</span><span class="n">rgidf</span><span class="p">,</span> <span class="n">from_prepro_level</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                                         <span class="n">prepro_base_url</span><span class="o">=</span><span class="n">base_url</span><span class="p">)</span>

<span class="c1"># to assess the model geometry (for e.g. distributed ice thickness plots),</span>
<span class="c1"># we need to set that to true</span>
<span class="c1">#cfg.PARAMS[&#39;store_model_geometry&#39;] = True</span>
<span class="c1">#workflow.execute_entity_task(tasks.prepare_for_inversion, gdirs)</span>

<span class="c1"># Default parameters</span>
<span class="c1"># Deformation: from Cuffey and Patterson 2010</span>
<span class="n">glen_a</span> <span class="o">=</span> <span class="mf">2.4e-24</span>
<span class="c1"># Sliding: from Oerlemans 1997</span>
<span class="n">fs</span> <span class="o">=</span> <span class="mf">5.7e-20</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2023-08-27 13:14:12: oggm.cfg: Reading default parameters from the OGGM `params.cfg` configuration file.
2023-08-27 13:14:12: oggm.cfg: Multiprocessing switched OFF according to the parameter file.
2023-08-27 13:14:12: oggm.cfg: Multiprocessing: using all available processors (N=2)
2023-08-27 13:14:13: oggm.cfg: Multiprocessing switched ON after user settings.
2023-08-27 13:14:23: oggm.workflow: init_glacier_directories from prepro level 3 on 35 glaciers.
2023-08-27 13:14:23: oggm.workflow: Execute entity tasks [gdir_from_prepro] on 35 glaciers
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">utils</span><span class="o">.</span><span class="n">DisableLogger</span><span class="p">():</span>  <span class="c1"># this scraps some output - to use with caution!!!</span>
    
    <span class="c1"># Correction factors</span>
    <span class="n">factors</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="n">factors</span> <span class="o">+=</span> <span class="p">[</span><span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
    <span class="n">factors</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

    <span class="c1"># Run the inversions tasks with the given factors</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">factors</span><span class="p">:</span>
        <span class="c1"># Without sliding</span>
        <span class="n">suf</span> <span class="o">=</span> <span class="s1">&#39;_</span><span class="si">{:03d}</span><span class="s1">_without_fs&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">f</span> <span class="o">*</span> <span class="mi">10</span><span class="p">))</span>
        <span class="n">workflow</span><span class="o">.</span><span class="n">execute_entity_task</span><span class="p">(</span><span class="n">tasks</span><span class="o">.</span><span class="n">mass_conservation_inversion</span><span class="p">,</span> <span class="n">gdirs</span><span class="p">,</span>
                                     <span class="n">glen_a</span><span class="o">=</span><span class="n">glen_a</span><span class="o">*</span><span class="n">f</span><span class="p">,</span> <span class="n">fs</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Store the results of the inversion only</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">compile_glacier_statistics</span><span class="p">(</span><span class="n">gdirs</span><span class="p">,</span> <span class="n">filesuffix</span><span class="o">=</span><span class="n">suf</span><span class="p">,</span>
                                         <span class="n">inversion_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># With sliding</span>
        <span class="n">suf</span> <span class="o">=</span> <span class="s1">&#39;_</span><span class="si">{:03d}</span><span class="s1">_with_fs&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">f</span> <span class="o">*</span> <span class="mi">10</span><span class="p">))</span>
        <span class="n">workflow</span><span class="o">.</span><span class="n">execute_entity_task</span><span class="p">(</span><span class="n">tasks</span><span class="o">.</span><span class="n">mass_conservation_inversion</span><span class="p">,</span> <span class="n">gdirs</span><span class="p">,</span>
                                     <span class="n">glen_a</span><span class="o">=</span><span class="n">glen_a</span><span class="o">*</span><span class="n">f</span><span class="p">,</span> <span class="n">fs</span><span class="o">=</span><span class="n">fs</span><span class="p">)</span>
        <span class="c1"># Store the results of the inversion only</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">compile_glacier_statistics</span><span class="p">(</span><span class="n">gdirs</span><span class="p">,</span> <span class="n">filesuffix</span><span class="o">=</span><span class="n">suf</span><span class="p">,</span>
                                         <span class="n">inversion_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="read-the-data">
<h2>Read the data<a class="headerlink" href="#read-the-data" title="Permalink to this heading">#</a></h2>
<p>The data are stored as csv files in the working directory. The easiest way to read them is to use <a class="reference external" href="http://pandas.pydata.org/">pandas</a>!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="kn">import</span> <span class="nn">os</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s read the output of the inversion with the default OGGM parameters first:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">WORKING_DIR</span><span class="p">,</span> <span class="s1">&#39;glacier_statistics_011_without_fs.csv&#39;</span><span class="p">),</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>rgi_region</th>
      <th>rgi_subregion</th>
      <th>name</th>
      <th>cenlon</th>
      <th>cenlat</th>
      <th>rgi_area_km2</th>
      <th>rgi_year</th>
      <th>glacier_type</th>
      <th>terminus_type</th>
      <th>is_tidewater</th>
      <th>...</th>
      <th>vas_volume_km3</th>
      <th>inv_volume_bsl_km3</th>
      <th>inv_volume_bwl_km3</th>
      <th>dem_source</th>
      <th>n_orig_centerlines</th>
      <th>flowline_type</th>
      <th>perc_invalid_flowline</th>
      <th>apparent_mb_from_any_mb_residual</th>
      <th>inversion_glen_a</th>
      <th>inversion_fs</th>
    </tr>
    <tr>
      <th>rgi_id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>RGI60-11.03208</th>
      <td>11</td>
      <td>11-02</td>
      <td>Aneto</td>
      <td>0.646032</td>
      <td>42.641357</td>
      <td>0.622</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.017699</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>2</td>
      <td>centerlines</td>
      <td>0.205128</td>
      <td>737.400000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03232</th>
      <td>11</td>
      <td>11-02</td>
      <td>Ossoue</td>
      <td>-0.141222</td>
      <td>42.771191</td>
      <td>0.449</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.011306</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>1168.200000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03222</th>
      <td>11</td>
      <td>11-02</td>
      <td>Monte Perdido Lower</td>
      <td>0.039655</td>
      <td>42.679337</td>
      <td>0.308</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.006733</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>2</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>887.700000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03209</th>
      <td>11</td>
      <td>11-02</td>
      <td>Maladeta E</td>
      <td>0.639343</td>
      <td>42.648979</td>
      <td>0.260</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.005334</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>593.500000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03231</th>
      <td>11</td>
      <td>11-02</td>
      <td>Oulettes Du Gaube</td>
      <td>-0.144215</td>
      <td>42.779716</td>
      <td>0.130</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.002057</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>509.400000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03213</th>
      <td>11</td>
      <td>11-02</td>
      <td>Seil De La Baque E</td>
      <td>0.494304</td>
      <td>42.694481</td>
      <td>0.105</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.001533</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>572.600000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03239</th>
      <td>11</td>
      <td>11-02</td>
      <td>Jezerces Gl No1</td>
      <td>19.807627</td>
      <td>42.465839</td>
      <td>0.097</td>
      <td>2007</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.001375</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.562500</td>
      <td>731.500000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03229</th>
      <td>11</td>
      <td>11-02</td>
      <td>Gabietous</td>
      <td>-0.057456</td>
      <td>42.695129</td>
      <td>0.087</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.001184</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>1600.600000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03218</th>
      <td>11</td>
      <td>11-02</td>
      <td>Llardana</td>
      <td>0.428193</td>
      <td>42.653946</td>
      <td>0.084</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.001128</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>1095.300000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03228</th>
      <td>11</td>
      <td>11-02</td>
      <td>Taillon</td>
      <td>-0.039683</td>
      <td>42.695419</td>
      <td>0.083</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.001110</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>1738.800000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03205</th>
      <td>11</td>
      <td>11-02</td>
      <td>Tempestades</td>
      <td>0.666092</td>
      <td>42.626839</td>
      <td>0.077</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.001001</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>108.800000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03206</th>
      <td>11</td>
      <td>11-02</td>
      <td>Barrancs</td>
      <td>0.658785</td>
      <td>42.632011</td>
      <td>0.067</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000827</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>1392.800000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03217</th>
      <td>11</td>
      <td>11-02</td>
      <td>La Paul</td>
      <td>0.437356</td>
      <td>42.661072</td>
      <td>0.057</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000662</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>882.900000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03221</th>
      <td>11</td>
      <td>11-02</td>
      <td>Monte Perdido Upper</td>
      <td>0.033972</td>
      <td>42.678589</td>
      <td>0.054</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000614</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>871.000000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03210</th>
      <td>11</td>
      <td>11-02</td>
      <td>Maladeta W</td>
      <td>0.632566</td>
      <td>42.652107</td>
      <td>0.054</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000614</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>402.100000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03233</th>
      <td>11</td>
      <td>11-02</td>
      <td>Infierno Central</td>
      <td>-0.258849</td>
      <td>42.783802</td>
      <td>0.053</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000599</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>532.200000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03225</th>
      <td>11</td>
      <td>11-02</td>
      <td>Astazou</td>
      <td>0.034118</td>
      <td>42.703136</td>
      <td>0.052</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000583</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>1260.300000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03211</th>
      <td>11</td>
      <td>11-02</td>
      <td>Boum</td>
      <td>0.555278</td>
      <td>42.700157</td>
      <td>0.050</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000553</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>687.600000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03240</th>
      <td>11</td>
      <td>11-02</td>
      <td>Jezerces Gl No2</td>
      <td>19.815450</td>
      <td>42.447353</td>
      <td>0.049</td>
      <td>2007</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000538</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>1706.700000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03227</th>
      <td>11</td>
      <td>11-02</td>
      <td>Pailla W</td>
      <td>0.015287</td>
      <td>42.705482</td>
      <td>0.046</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000493</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>1058.400000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03219</th>
      <td>11</td>
      <td>11-02</td>
      <td>Barroude</td>
      <td>0.142224</td>
      <td>42.726147</td>
      <td>0.042</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000435</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>620.000000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03220</th>
      <td>11</td>
      <td>11-02</td>
      <td>Munia</td>
      <td>0.129816</td>
      <td>42.717735</td>
      <td>0.041</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000421</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>383.300000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03212</th>
      <td>11</td>
      <td>11-02</td>
      <td>Portillon D Oo</td>
      <td>0.511460</td>
      <td>42.693188</td>
      <td>0.040</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000407</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>532.500000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03226</th>
      <td>11</td>
      <td>11-02</td>
      <td>Pailla E</td>
      <td>0.021260</td>
      <td>42.705322</td>
      <td>0.035</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000339</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>-763.200000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03241</th>
      <td>11</td>
      <td>11-02</td>
      <td>It4L30000001 Gh Del Calderone</td>
      <td>13.566710</td>
      <td>42.470540</td>
      <td>0.033</td>
      <td>1990</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000312</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.250000</td>
      <td>1036.800000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03230</th>
      <td>11</td>
      <td>11-02</td>
      <td>Petit Vignemale</td>
      <td>-0.137718</td>
      <td>42.775856</td>
      <td>0.027</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000237</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>131.700000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03215</th>
      <td>11</td>
      <td>11-02</td>
      <td>Gourgs Blancs</td>
      <td>0.480293</td>
      <td>42.700859</td>
      <td>0.026</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000225</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>677.300000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03234</th>
      <td>11</td>
      <td>11-02</td>
      <td>Las Neous</td>
      <td>-0.286945</td>
      <td>42.838642</td>
      <td>0.025</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000213</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>346.200000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03223</th>
      <td>11</td>
      <td>11-02</td>
      <td>Marbore</td>
      <td>0.018435</td>
      <td>42.693417</td>
      <td>0.023</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000190</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>596.371893</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03224</th>
      <td>11</td>
      <td>11-02</td>
      <td>Cilindro</td>
      <td>0.026603</td>
      <td>42.689346</td>
      <td>0.022</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000179</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>760.500000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03204</th>
      <td>11</td>
      <td>11-02</td>
      <td>Valier</td>
      <td>1.088501</td>
      <td>42.798626</td>
      <td>0.021</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000168</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>596.371893</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03214</th>
      <td>11</td>
      <td>11-02</td>
      <td>Seil De La Baque W</td>
      <td>0.490498</td>
      <td>42.696220</td>
      <td>0.020</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000157</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>422.800000</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03238</th>
      <td>11</td>
      <td>11-02</td>
      <td>Debeli Namet Gl</td>
      <td>19.067500</td>
      <td>43.115000</td>
      <td>0.019</td>
      <td>2003</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000146</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>596.371893</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03207</th>
      <td>11</td>
      <td>11-02</td>
      <td>Coronas</td>
      <td>0.654112</td>
      <td>42.632977</td>
      <td>0.015</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000106</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>596.371893</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
    <tr>
      <th>RGI60-11.03216</th>
      <td>11</td>
      <td>11-02</td>
      <td>Posets</td>
      <td>0.438703</td>
      <td>42.656570</td>
      <td>0.010</td>
      <td>2011</td>
      <td>Glacier</td>
      <td>Land-terminating</td>
      <td>False</td>
      <td>...</td>
      <td>0.000060</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NASADEM</td>
      <td>1</td>
      <td>centerlines</td>
      <td>0.000000</td>
      <td>596.371893</td>
      <td>2.640000e-24</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>35 rows × 25 columns</p>
</div></div></div>
</div>
<p>There are only 35 glaciers in the Pyrenees! That’s why the run was relatively fast.</p>
</section>
<section id="results">
<h2>Results<a class="headerlink" href="#results" title="Permalink to this heading">#</a></h2>
<p>One way to visualize the output is to plot the volume as a function of area in a log-log plot, illustrating the well known volume-area relationship of mountain glaciers:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;scatter&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;rgi_area_km2&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;inv_volume_km3&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">semilogx</span><span class="p">();</span> <span class="n">ax</span><span class="o">.</span><span class="n">semilogy</span><span class="p">()</span>
<span class="n">xlim</span><span class="p">,</span> <span class="n">ylim</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1e-2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="p">[</span><span class="mf">1e-5</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xlim</span><span class="p">);</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">ylim</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/2bdef386b2eb6c65b764d9b1448cafbd8902facfc88591f1c2aa13e51637077c.png" src="../../_images/2bdef386b2eb6c65b764d9b1448cafbd8902facfc88591f1c2aa13e51637077c.png" />
</div>
</div>
<p>As we can see, there is a clear relationship, but it is not perfect. Let’s fit a line to these data (the “volume-area scaling law”):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Fit in log space </span>
<span class="n">dfl</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;inv_volume_km3&#39;</span><span class="p">,</span> <span class="s1">&#39;rgi_area_km2&#39;</span><span class="p">]])</span>
<span class="n">slope</span><span class="p">,</span> <span class="n">intercept</span><span class="p">,</span> <span class="n">r_value</span><span class="p">,</span> <span class="n">p_value</span><span class="p">,</span> <span class="n">std_err</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">linregress</span><span class="p">(</span><span class="n">dfl</span><span class="o">.</span><span class="n">rgi_area_km2</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">dfl</span><span class="o">.</span><span class="n">inv_volume_km3</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>In their seminal paper, <a class="reference external" href="https://agupubs.onlinelibrary.wiley.com/doi/10.1029/97JB01696">Bahr et al. (1997)</a> describe this relationship as:</p>
<div class="math notranslate nohighlight">
\[V = \alpha S^{\gamma}\]</div>
<p>With V the volume in km<span class="math notranslate nohighlight">\(^3\)</span>, S the area in km<span class="math notranslate nohighlight">\(^2\)</span> and <span class="math notranslate nohighlight">\(\alpha\)</span> and <span class="math notranslate nohighlight">\(\gamma\)</span> the scaling parameters (0.034 and 1.375, respectively). How does OGGM compare to these in the Pyrenees?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;power: </span><span class="si">{:.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">slope</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;slope: </span><span class="si">{:.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">intercept</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>power: 1.284
slope: 0.046
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;scatter&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;rgi_area_km2&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;inv_volume_km3&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;OGGM glaciers&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xlim</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">intercept</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">xlim</span> <span class="o">**</span> <span class="n">slope</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;C3&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Fitted line&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">semilogx</span><span class="p">();</span> <span class="n">ax</span><span class="o">.</span><span class="n">semilogy</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">xlim</span><span class="p">);</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">ylim</span><span class="p">);</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/b72da81bc1d108486a016231769955c701c1ca2f174247a567e5bfc006bf60f9.png" src="../../_images/b72da81bc1d108486a016231769955c701c1ca2f174247a567e5bfc006bf60f9.png" />
</div>
</div>
</section>
<section id="sensitivity-analysis">
<h2>Sensitivity analysis<a class="headerlink" href="#sensitivity-analysis" title="Permalink to this heading">#</a></h2>
<p>Now, let’s read the output files of each run separately, and compute the regional volume out of them:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dftot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">factors</span><span class="p">)</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">factors</span><span class="p">:</span>
    <span class="c1"># Without sliding</span>
    <span class="n">suf</span> <span class="o">=</span> <span class="s1">&#39;_</span><span class="si">{:03d}</span><span class="s1">_without_fs&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">f</span> <span class="o">*</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">fpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">WORKING_DIR</span><span class="p">,</span> <span class="s1">&#39;glacier_statistics</span><span class="si">{}</span><span class="s1">.csv&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">suf</span><span class="p">))</span>
    <span class="n">_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">dftot</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;without_sliding&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_df</span><span class="o">.</span><span class="n">inv_volume_km3</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    
    <span class="c1"># With sliding</span>
    <span class="n">suf</span> <span class="o">=</span> <span class="s1">&#39;_</span><span class="si">{:03d}</span><span class="s1">_with_fs&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">f</span> <span class="o">*</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">fpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">WORKING_DIR</span><span class="p">,</span> <span class="s1">&#39;glacier_statistics</span><span class="si">{}</span><span class="s1">.csv&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">suf</span><span class="p">))</span>
    <span class="n">_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">dftot</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;with_sliding&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_df</span><span class="o">.</span><span class="n">inv_volume_km3</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>And plot them:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dftot</span><span class="o">.</span><span class="n">plot</span><span class="p">();</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Factor of Glen A (default 1)&#39;</span><span class="p">);</span> <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Regional volume (km$^3$)&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/c1d0d039dd1e868fd7011e2b3199498837b203f938b959041141d40e4764a670.png" src="../../_images/c1d0d039dd1e868fd7011e2b3199498837b203f938b959041141d40e4764a670.png" />
</div>
</div>
<p>As you can see, there is quite a difference between the solutions. In particular, close to the default value for Glen A, the regional estimates are very sensitive to small changes in A. The calibration of A is a problem that has yet to be resolved by global glacier models…</p>
</section>
<section id="since-oggm-version-1-4-calibrate-to-match-the-consensus-estimate">
<h2>Since OGGM version 1.4: calibrate to match the consensus estimate<a class="headerlink" href="#since-oggm-version-1-4-calibrate-to-match-the-consensus-estimate" title="Permalink to this heading">#</a></h2>
<p>Here, one “best Glen A” is found in order that the total inverted volume of the glaciers of gdirs fits to the 2019 consensus estimate.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># when we use all glaciers, no Glen A could be found within the range [0.1,10] that would match the consensus estimate</span>
<span class="c1"># usually, this is applied on larger regions where this error should not occur ! </span>
<span class="n">cdf</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">calibrate_inversion_from_consensus</span><span class="p">(</span><span class="n">gdirs</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">filter_inversion_output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2023-08-27 13:25:09: oggm.workflow: Applying global task calibrate_inversion_from_consensus on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Consensus estimate optimisation with A factor: 0.1 and fs: 0
2023-08-27 13:25:10: oggm.workflow: Applying global task inversion_tasks on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [prepare_for_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [mass_conservation_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [get_inversion_volume] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Consensus estimate optimisation with A factor: 10.0 and fs: 0
2023-08-27 13:25:10: oggm.workflow: Applying global task inversion_tasks on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [prepare_for_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [mass_conservation_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [get_inversion_volume] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Consensus estimate optimisation with A factor: 9.62509836707861 and fs: 0
2023-08-27 13:25:10: oggm.workflow: Applying global task inversion_tasks on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [prepare_for_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [mass_conservation_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [get_inversion_volume] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Consensus estimate optimisation with A factor: 7.560331031975819 and fs: 0
2023-08-27 13:25:10: oggm.workflow: Applying global task inversion_tasks on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [prepare_for_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [mass_conservation_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [get_inversion_volume] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Consensus estimate optimisation with A factor: 7.394383472208666 and fs: 0
2023-08-27 13:25:10: oggm.workflow: Applying global task inversion_tasks on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [prepare_for_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [mass_conservation_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [get_inversion_volume] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Consensus estimate optimisation with A factor: 7.357411554846623 and fs: 0
2023-08-27 13:25:10: oggm.workflow: Applying global task inversion_tasks on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [prepare_for_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [mass_conservation_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [get_inversion_volume] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: calibrate_inversion_from_consensus converged after 5 iterations and fs=0. The resulting Glen A factor is 7.394383472208666.
2023-08-27 13:25:10: oggm.workflow: Applying global task inversion_tasks on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [prepare_for_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [mass_conservation_inversion] on 34 glaciers
2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [get_inversion_volume] on 34 glaciers
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>vol_itmix_m3        4.859110e+07
vol_bsl_itmix_m3    0.000000e+00
vol_oggm_m3         4.858185e+07
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Note that here we calibrate the Glen A parameter to a value that is equal for all glaciers of gdirs, i.e. we calibrate to match the total volume of all glaciers and not to match them individually.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cdf</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>vol_itmix_m3</th>
      <th>vol_bsl_itmix_m3</th>
      <th>vol_oggm_m3</th>
    </tr>
    <tr>
      <th>RGIId</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>RGI60-11.03232</th>
      <td>1.422478e+07</td>
      <td>0.0</td>
      <td>1.381302e+07</td>
    </tr>
    <tr>
      <th>RGI60-11.03222</th>
      <td>5.158277e+06</td>
      <td>0.0</td>
      <td>7.256293e+06</td>
    </tr>
    <tr>
      <th>RGI60-11.03209</th>
      <td>5.335579e+06</td>
      <td>0.0</td>
      <td>5.486015e+06</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><em>just as a side note, “vol_bsl_itmix_m3” means volume below sea level and is therefore zero for these Alpine glaciers!</em></p>
</section>
<section id="distributed-ice-thickness">
<h2>Distributed ice thickness<a class="headerlink" href="#distributed-ice-thickness" title="Permalink to this heading">#</a></h2>
<p>The OGGM inversion and dynamical models use the “1D” flowline assumption: for some applications, you might want to use OGGM to create distributed ice thickness maps. Currently, OGGM implements two ways to “distribute” the flowline thicknesses, but only <a class="reference external" href="https://docs.oggm.org/en/stable/generated/oggm.tasks.distribute_thickness_per_altitude.html">the simplest one</a> works robustly:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Distribute</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">execute_entity_task</span><span class="p">(</span><span class="n">tasks</span><span class="o">.</span><span class="n">distribute_thickness_per_altitude</span><span class="p">,</span> <span class="n">gdirs</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2023-08-27 13:25:10: oggm.workflow: Execute entity tasks [distribute_thickness_per_altitude] on 35 glaciers
</pre></div>
</div>
</div>
</div>
<p>We just created a new output of the model, which we can access in the <code class="docutils literal notranslate"><span class="pre">gridded_data</span></code> file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># xarray is an awesome library! Did you know about it?</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">rioxarray</span> <span class="k">as</span> <span class="nn">rioxr</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">gdirs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_filepath</span><span class="p">(</span><span class="s1">&#39;gridded_data&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">distributed_thickness</span><span class="o">.</span><span class="n">plot</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/c209b65b2b6af5cea8c05777ae31b375d7746930c75edb0fca9d291a125ca719.png" src="../../_images/c209b65b2b6af5cea8c05777ae31b375d7746930c75edb0fca9d291a125ca719.png" />
</div>
</div>
<p>Since some people find <code class="docutils literal notranslate"><span class="pre">geotiff</span></code> data easier to read than <code class="docutils literal notranslate"><span class="pre">netCDF</span></code>, OGGM also provides a tool to convert the variables in <code class="docutils literal notranslate"><span class="pre">gridded_data.nc</span></code> file to a <code class="docutils literal notranslate"><span class="pre">geotiff</span></code> file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># save the distributed ice thickness into a geotiff file</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">execute_entity_task</span><span class="p">(</span><span class="n">tasks</span><span class="o">.</span><span class="n">gridded_data_var_to_geotiff</span><span class="p">,</span> <span class="n">gdirs</span><span class="p">,</span> <span class="n">varname</span><span class="o">=</span><span class="s1">&#39;distributed_thickness&#39;</span><span class="p">)</span>

<span class="c1"># The default path of the geotiff file is in the glacier directory with the name &quot;distributed_thickness.tif&quot;</span>
<span class="c1"># Let&#39;s check if the file exists</span>
<span class="k">for</span> <span class="n">gdir</span> <span class="ow">in</span> <span class="n">gdirs</span><span class="p">:</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">gdir</span><span class="o">.</span><span class="n">dir</span><span class="p">,</span> <span class="s1">&#39;distributed_thickness.tif&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2023-08-27 13:25:12: oggm.workflow: Execute entity tasks [gridded_data_var_to_geotiff] on 35 glaciers
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Open the last file with xarray&#39;s open_rasterio</span>
<span class="n">rioxr</span><span class="o">.</span><span class="n">open_rasterio</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/1c645da42413b2bfb6f35114f96fa1bda9b33b7b9158675b17641c7373ab0cb1.png" src="../../_images/1c645da42413b2bfb6f35114f96fa1bda9b33b7b9158675b17641c7373ab0cb1.png" />
</div>
</div>
<p>In fact, <code class="docutils literal notranslate"><span class="pre">tasks.gridded_data_var_to_geotiff()</span></code> can save any variable in the <code class="docutils literal notranslate"><span class="pre">gridded_data.nc</span></code> file. The <code class="docutils literal notranslate"><span class="pre">geotiff</span></code> is named as the variable name with a <code class="docutils literal notranslate"><span class="pre">.tif</span></code> suffix. Have a try by yourself ;-)</p>
</section>
<section id="plot-many-glaciers-on-a-map">
<h2>Plot many glaciers on a map<a class="headerlink" href="#plot-many-glaciers-on-a-map" title="Permalink to this heading">#</a></h2>
<p>Let’s select a group of glaciers close to each other:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rgi_ids</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RGI60-11.0</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3205</span><span class="p">,</span> <span class="mi">3211</span><span class="p">)]</span>
<span class="n">sel_gdirs</span> <span class="o">=</span> <span class="p">[</span><span class="n">gdir</span> <span class="k">for</span> <span class="n">gdir</span> <span class="ow">in</span> <span class="n">gdirs</span> <span class="k">if</span> <span class="n">gdir</span><span class="o">.</span><span class="n">rgi_id</span> <span class="ow">in</span> <span class="n">rgi_ids</span><span class="p">]</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">plot_googlemap</span><span class="p">(</span><span class="n">sel_gdirs</span><span class="p">)</span>
<span class="c1"># you might need to install motionless if it is not yet in your environment</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/e18df25d9eca3e36d8c1e2617aa4d1a678a28f1edcc5e38493704f0f1398c038.png" src="../../_images/e18df25d9eca3e36d8c1e2617aa4d1a678a28f1edcc5e38493704f0f1398c038.png" />
</div>
</div>
<section id="using-oggm">
<h3>Using OGGM<a class="headerlink" href="#using-oggm" title="Permalink to this heading">#</a></h3>
<p>OGGM can plot the thickness of a group of glaciers on a map:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graphics</span><span class="o">.</span><span class="n">plot_distributed_thickness</span><span class="p">(</span><span class="n">sel_gdirs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/6fd17b8d1a7ca4752312e5cf8a345d98be842b9806152ca9ddf2852913aa4a69.png" src="../../_images/6fd17b8d1a7ca4752312e5cf8a345d98be842b9806152ca9ddf2852913aa4a69.png" />
</div>
</div>
<p>This is however not always very useful because OGGM can only plot on a map as large as the local glacier map of the first glacier in the list. See <a class="reference external" href="https://github.com/OGGM/oggm/issues/1007">this issue</a> for a discussion about why. In this case, we had a large enough border, and like that all neighboring glacers are visible.</p>
<p>Since <a class="reference external" href="https://github.com/OGGM/oggm/pull/1508">this issue</a>, several glaciers can be plotted at once by the kwarg <code class="docutils literal notranslate"><span class="pre">extend_plot_limit=True</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graphics</span><span class="o">.</span><span class="n">plot_inversion</span><span class="p">(</span><span class="n">sel_gdirs</span><span class="p">,</span> <span class="n">extend_plot_limit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/f4b9cb3c9b89ddaec327e29a16be5a45f52cabf093002bcd7616d77695aa6058.png" src="../../_images/f4b9cb3c9b89ddaec327e29a16be5a45f52cabf093002bcd7616d77695aa6058.png" />
</div>
</div>
</section>
<section id="using-salem">
<h3>Using salem<a class="headerlink" href="#using-salem" title="Permalink to this heading">#</a></h3>
<p>Under the hood, OGGM uses <a class="reference external" href="https://salem.readthedocs.io">salem</a> to make the plots. Let’s do that for our case: it requires some manual tweaking, but it should be possible to automatize this better in the future.</p>
<p><em>Note: this also requires a version of salem after 21.05.2020</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">salem</span>
<span class="c1"># Make a grid covering the desired map extent</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">salem</span><span class="o">.</span><span class="n">mercator_grid</span><span class="p">(</span><span class="n">center_ll</span><span class="o">=</span><span class="p">(</span><span class="mf">0.65</span><span class="p">,</span> <span class="mf">42.64</span><span class="p">),</span> <span class="n">extent</span><span class="o">=</span><span class="p">(</span><span class="mi">4000</span><span class="p">,</span> <span class="mi">4000</span><span class="p">))</span>
<span class="c1"># Create a map out of it</span>
<span class="n">smap</span> <span class="o">=</span> <span class="n">salem</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">countries</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="c1"># Add the glaciers outlines</span>
<span class="k">for</span> <span class="n">gdir</span> <span class="ow">in</span> <span class="n">sel_gdirs</span><span class="p">:</span>
    <span class="n">crs</span> <span class="o">=</span> <span class="n">gdir</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">center_grid</span>
    <span class="n">geom</span> <span class="o">=</span> <span class="n">gdir</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s1">&#39;geometries&#39;</span><span class="p">)</span>
    <span class="n">poly_pix</span> <span class="o">=</span> <span class="n">geom</span><span class="p">[</span><span class="s1">&#39;polygon_pix&#39;</span><span class="p">]</span>
    <span class="n">smap</span><span class="o">.</span><span class="n">set_geometry</span><span class="p">(</span><span class="n">poly_pix</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">.2</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">poly_pix</span><span class="o">.</span><span class="n">interiors</span><span class="p">:</span>
        <span class="n">smap</span><span class="o">.</span><span class="n">set_geometry</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">smap</span><span class="o">.</span><span class="n">visualize</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/66a6cd51ebfec87884cdec7a5138ecea6dab1896f38935dd09c9c101f600ea9d.png" src="../../_images/66a6cd51ebfec87884cdec7a5138ecea6dab1896f38935dd09c9c101f600ea9d.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Now add the thickness data</span>
<span class="k">for</span> <span class="n">gdir</span> <span class="ow">in</span> <span class="n">sel_gdirs</span><span class="p">:</span>
    <span class="n">grids_file</span> <span class="o">=</span> <span class="n">gdir</span><span class="o">.</span><span class="n">get_filepath</span><span class="p">(</span><span class="s1">&#39;gridded_data&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">utils</span><span class="o">.</span><span class="n">ncDataset</span><span class="p">(</span><span class="n">grids_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">nc</span><span class="p">:</span>
        <span class="n">vn</span> <span class="o">=</span> <span class="s1">&#39;distributed_thickness&#39;</span>
        <span class="n">thick</span> <span class="o">=</span> <span class="n">nc</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">vn</span><span class="p">][:]</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">nc</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s1">&#39;glacier_mask&#39;</span><span class="p">][:]</span>
    <span class="n">thick</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">thick</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">NaN</span><span class="p">)</span>
    <span class="c1"># The &quot;overplot=True&quot; is key here</span>
    <span class="c1"># this needs a recent version of salem to run properly</span>
    <span class="n">smap</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">thick</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">gdir</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">center_grid</span><span class="p">,</span> <span class="n">overplot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set colorscale and other things</span>
<span class="n">smap</span><span class="o">.</span><span class="n">set_cmap</span><span class="p">(</span><span class="n">graphics</span><span class="o">.</span><span class="n">OGGM_CMAPS</span><span class="p">[</span><span class="s1">&#39;glacier_thickness&#39;</span><span class="p">])</span>
<span class="n">smap</span><span class="o">.</span><span class="n">set_plot_params</span><span class="p">(</span><span class="n">nlevels</span><span class="o">=</span><span class="mi">256</span><span class="p">)</span>
<span class="c1"># Plot</span>
<span class="n">f</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">smap</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">cbar_title</span><span class="o">=</span><span class="s1">&#39;Glacier thickness (m)&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/6550ac8bde4d85211a15113ac48d232d7c3f62cd9cc269a8cb9b2d340effee1e.png" src="../../_images/6550ac8bde4d85211a15113ac48d232d7c3f62cd9cc269a8cb9b2d340effee1e.png" />
</div>
</div>
</section>
</section>
<section id="what-s-next">
<h2>What’s next?<a class="headerlink" href="#what-s-next" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>return to the <a class="reference external" href="https://docs.oggm.org">OGGM documentation</a></p></li>
<li><p>back to the <a class="reference internal" href="../welcome.html"><span class="doc std std-doc">table of contents</span></a></p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks/beginner"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="deal_with_errors.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Dealing with errors after a run</p>
      </div>
    </a>
    <a class="right-next"
       href="hydrological_output.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Hydrological mass-balance output</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run">Run</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#read-the-data">Read the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#results">Results</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sensitivity-analysis">Sensitivity analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#since-oggm-version-1-4-calibrate-to-match-the-consensus-estimate">Since OGGM version 1.4: calibrate to match the consensus estimate</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#distributed-ice-thickness">Distributed ice thickness</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-many-glaciers-on-a-map">Plot many glaciers on a map</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-oggm">Using OGGM</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-salem">Using salem</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-s-next">What’s next?</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By OGGM e.V. and OGGM Contributors
</p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <p>
These notebooks are licensed under a <a href="https://github.com/OGGM/tutorials/blob/master/LICENSE.txt" target="_blank">BSD-3-Clause license</a>.
<br>
&copy; Copyright 2014-2021.
</p>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>